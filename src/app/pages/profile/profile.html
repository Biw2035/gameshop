<app-header></app-header>

<div class="profile-container">
  <div class="profile-top">

    <div class="user-info">
      <img
        [src]="user?.profile_image || 'https://via.placeholder.com/150'"
        alt="profile"
        class="profile-img"
      />
      <p>Role: {{ user?.role }}</p>
      <p>Username: {{ user?.username }}</p>
      <p>E-mail: {{ user?.email }}</p>
      <p>Wallet: {{ user?.wallet_balance | number:'1.0-2' }} ‡∏ö‡∏≤‡∏ó</p>

      <button class="edit-btn" (click)="goToEditProfile()">Edit</button>
    </div>

    <div class="wallet">
      <h3>‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h3>
      <button (click)="topUp(100)">‡πÄ‡∏ï‡∏¥‡∏° 100 ‡∏ö‡∏≤‡∏ó</button>
      <button (click)="topUp(500)">‡πÄ‡∏ï‡∏¥‡∏° 500 ‡∏ö‡∏≤‡∏ó</button>
      <button (click)="topUp(1000)">‡πÄ‡∏ï‡∏¥‡∏° 1000 ‡∏ö‡∏≤‡∏ó</button>
      <input type="number" [(ngModel)]="topUpAmount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô ......." />
      <button (click)="topUp()">‡πÄ‡∏ï‡∏¥‡∏°</button>
    </div>
  </div>

<div class="transaction-history">
  <h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>

  <div *ngIf="transactions.length === 0" class="no-transactions">
    <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
  </div>

  <div class="transactions-list" *ngIf="transactions.length > 0">
    <div *ngFor="let t of transactions" 
         class="transaction-card" 
         [ngClass]="t.type">
      
      <div class="icon">
        <span *ngIf="t.type === 'topup'">üí∞</span>
        <span *ngIf="t.type === 'purchase'">üéÆ</span>
      </div>

      <div class="details">
        <div class="desc">
          <span *ngIf="t.type === 'topup'">‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</span>
          <span *ngIf="t.type === 'purchase'">‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Å‡∏° "{{ t.game_name }}"</span>
        </div>
        <div class="amount">
          {{ t.amount | number:'1.0-2' }} ‡∏ö‡∏≤‡∏ó
        </div>
        <div class="time">{{ t.created_at | date:'short' }}</div>
      </div>

    </div>
  </div>
</div>